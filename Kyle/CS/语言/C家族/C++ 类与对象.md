#语言/cpp
***
## C++的[[类与对象]]

### 构造函数
[[深拷贝&浅拷贝]]
##### 拷贝构造函数
使用情况：
-   当使用一个已有对象来初始化一个新对象时；
-   值传递的方式给函数参数传值；
-   以值方式返回局部对象；
```cpp
//自定义的写法
Person(const Person &c)
{
	... //拷贝相关的属性
}
```

##### 构造函数的调用方式
```cpp
int main()
{
	//括号法(常用)
	Person p1;         //无参构造函数的调用；（不要加括号，加了括号编译器会以为是函数的声明）
	Person p2(10);     //有参构造函数的调用；
	Person p3(p2);     //拷贝构造函数的调用；

	//显示法
	Person p1;
	Person p2 = Person(10);
	Person p3 = Person(p2);
	Person(10);        //单独写就是匿名对象 当前执行结束后，马上析构

	//隐式转换法
	Person p4 = 10;
	Person p5 = p4;
}
```

##### 构造函数的调用规则
-   默认情况下，C++编译器至少给一个类添加4个函数： 
		1.默认构造函数（无参空实现） 
		2.默认析构函数（无参空实现 ） 
		3.默认拷贝构造函数（对属性进行值拷贝） 
		4.赋值运算符operator=，作用是对属性进行值拷贝；
		
-   如果用户定义了有参构造函数，C++不再提供默认无参构造函数，但会提供默认拷贝构造函数；
-   如果用户定义了拷贝构造函数，C++不再提供其他构造函数；

##### 初始化列表
用于初始化属性
```cpp
构造函数():属性1(值1),属性2(值2)...{}
```

### 析构函数
函数名跟类名相同，在名称前加上符号~
没有返回值，不用写void；
只会在对象销毁前调用一次；
可以将堆区开辟的数据进行释放操作；
```cpp
~类名()
```

### 类对象作为类成员
构造的时候，先构造类成员，再构造自身 ；
析构的时候，顺序与构造相反；

### 静态成员函数
所有对象共享同一个函数；
静态成员函数只能访问静态成员变量；
两种访问方式：
1.  通过对象访问；
2.  通过类名访问；

### 成员变量 和 成员函数分开存储
空对象占用的内存空间为1；（分配1个字节空间，是为了区分空对象占内存的位置，每个空对象应该要有一个独一无二的内存地址）
-   非静态成员变量属于类对象上；
-   **静态成员变量**不属于类对象上，不占用类对象的空间；
-   成员函数都不属于类对象上；（成员函数指挥诞生一份函数实例，多个同类型对象会共用一块代码）

### 友元 friend
让一个函数或者类 访问另一个类中的私有成员
3种实现：
-   全局函数做友元；
-   类做友元；
-   成员函数做友元；
```cpp
class Buliding
{
	friend void g_visit(Building *b);         //全局函数做友元
	friend class Person;                      //类做友元
	friend void Person::visit(Building *b);   //成员函数做友元
	void Building()
	{
		bedroom = "卧室";
	}
private:
	string bedroom;
}

class Person
{
public:
	void visit(Building b)
	{
		cout<< b.bedroom<<endl;
	}
}

void g_visit(Building *b)  //全局函数
{
		cout<< b.bedroom<<endl;	
};

void test()
{
	Building building;
	g_visit(&building);   //全局函数调用
	Person person;
	person.visit(buidling);   //友元类调用 || 成员函数调用
}
```